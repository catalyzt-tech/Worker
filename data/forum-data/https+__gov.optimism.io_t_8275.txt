{
  "title": "OP Passport | Design Document",
  "content": "I am excited to share with the new project we are working on called OP Passport.\nThis initiative, funded by the OP Season 5 Builder Grant, aims to enhance the\nprivacy, security, and active participation of governance on the Optimism.\n\nGET INVOLVED\n\nWe invite the Optimism community to review this design document and provide\nfeedback. Your insights and suggestions will be invaluable in refining and\nimproving the OP Passport project.\n\nYour feedback is crucial to ensure we build a robust and effective platform that\nmeets the needs of all governance participants. We look forward to your thoughts\nand suggestions!\n\nINTRODUCTION\n\n * Project Overview: The OP Passport project aims to develop an open-source\n   platform for governance participants on Optimism, utilizing Zero-Knowledge\n   Proof (ZKP) technology for privacy-preserving attestations and on-chain\n   identity passports. The platform enhances privacy, security, and active\n   participation of governance by enabling participants to issue and manage\n   their on-chain identity passports.\n\n * Purpose of the Document: This design document outlines the framework, badge\n   criteria, visual designs, attestation mechanisms, and integration of ZK\n   technology, providing clear guidance for the development and implementation\n   of the OP Passport system.\n\nSYSTEM FRAMEWORK\n\n * Architecture Overview:\n   \n   \n   [https://europe1.discourse-cdn.com/bc41dd/optimized/2X/1/1952faa1456456647ccf83b4a16df305104f160d_2_624x347.png]\n   1600×890 186 KB\n   [https://europe1.discourse-cdn.com/bc41dd/original/2X/1/1952faa1456456647ccf83b4a16df305104f160d.png]\n   \n   \n   \n   * The system architecture includes the front-end web interface, back-end\n     services, smart contracts, and a database for tracking user achievements\n     and badge issuance. The architecture is designed to ensure privacy and\n     security through the integration of ZK technology.\n\n * Core Components:\n   \n   * OP Passport Frontend: Web interface for users to interact with the\n     platform.\n   * Database: Storage for user data, badge issuance records, and attestations.\n   * Back-End Service\n     * Curia Indexer: Indexed data from on-chain and off-chain. This indexed\n       data will be stored in the database for the criteria for each badge\n       issuance record.\n     * Issuer: The backend service that is responsible for issuing badges to\n       users. It also acts as a relayer for anonymous attestation.\n   * Smart Contracts: Blockchain-based contracts for badge minting, identity\n     attributes, and ZK proofs.\n     * Resolver: for validate on-chain criteria on endorsement attestation and\n       verify proof & signature on anonymous attestation.\n     * Smart Account: smart contract account as passport and act as identity\n       layer for each user.\n\n * Integration Points:\n   \n   * OP Mainnet and OP Sepolia Testnet: Deployment environments for the\n     platform. The lists of the contracts that OP Passport need to interact will\n     be as follows:\n     * OP Contract: for votes and delegates data\n     * Gov Contract: for governance participation data\n     * EAS Contract: to issue new attestation and retrieve existing attestation\n       data (ex. Badgeholder information, etc.)\n     * Alligator Contract: for partial delegation information.\n     * EAS Schema Registry: to register new schema for OP Passport.\n     * Account Factory: to create a new Smart Account for holding OP Passport\n       and act as the identity layer for each user.\n   * Governance Database: Integration for reliable data attestation and\n     verification of governance activities.\n\nFEATURES\n\n * Digital Passports:\n   * Functionality for creating and managing digital identity passports.\n   * Integration with on-chain identity attributes.\n * Badge Issuance:\n   * Mechanism for issuing badges based on predefined criteria.\n   * Smart contract integration for badge minting and management.\n * Public and Anonymous Attestations for Endorsement:\n   * Options for users to create public or anonymous attestations.\n   * Workflow for generating and verifying attestations.\n * User Dashboard:\n   * Dashboard for users to view their badges, attestations, and passport\n     status.\n   * Analytics and insights on user participation and engagement.\n\nGOVERNANCE PARTICIPANT ROLES\n\n * Roles:\n   * Delegates: Individuals who receive delegated voting power to participate in\n     governance.\n   * Delegators: Individuals who delegate their voting power to delegates.\n   * Badgeholders: Members of the Optimism Citizens’ House who vote on the\n     allocation of Retro Funding.\n\nBADGE\n\n * Criteria Definitions:\n   * Delegate\n     * Voting Power: based on the amount of OP controlled:\n     * Top Voting Power Ranking:\n     * Delegate Address Count: Reflect the breadth of trust\n     * Voter Turnout/Participation Rate: Ensure active participation\n     * Status: Encourage ongoing activity:\n       * Active, Inactive, Ghost\n     * Seasonal Participation: Recognize long-term contributors:\n       * Badge for each season participated\n     * Votes on Proposals: Reward frequent voters:\n     * Delegate Expansion: Attracting New Delegator\n     * Partial Delegation\n       * Receive Partial delegation\n   * Delegator Metrics:\n     * Duration of Delegation: Reflect commitment:\n     * Amount Delegated:Indicates the amount of voting power delegated.\n     * Noted that some of the Delegate metric still applicable to Delegator\n       metric since delegator is the one who delegate their voting power\n   * Badgeholder:\n     * Votes on Proposals: Reward frequent voters:\n     * Round Participation: Recognize long-term contributors:\n       * Badge for each Round participated\n * Badge Types:\n   * Gaming-style, with progressive levels (3-5) based on achievement criteria.\n * Issuance Conditions:\n   * Badges are issued by the Curia team each season. Data is collected at the\n     season’s end to determine achievement levels for each metric.\n\nVISUAL DESIGNS\n\nUI/UX Design\n\n\n\nimage\n[https://europe1.discourse-cdn.com/bc41dd/optimized/2X/4/4d55b91c5920324f6229f7164162523f4b55882d_2_690x448.jpeg]\nimage1420×922 198 KB\n[https://europe1.discourse-cdn.com/bc41dd/original/2X/4/4d55b91c5920324f6229f7164162523f4b55882d.jpeg]\n\n\n\n\n\nimage\n[https://europe1.discourse-cdn.com/bc41dd/optimized/2X/d/d1ed40de024b37fd6d6f4621c3bdb85c54f210de_2_690x447.jpeg]\nimage1260×818 157 KB\n[https://europe1.discourse-cdn.com/bc41dd/original/2X/d/d1ed40de024b37fd6d6f4621c3bdb85c54f210de.jpeg]\n\n\n\n\n\nimage\n[https://europe1.discourse-cdn.com/bc41dd/optimized/2X/6/64c16f77b47e318a985ecb8c512edb4971fd9bd2_2_690x447.jpeg]\nimage1260×818 122 KB\n[https://europe1.discourse-cdn.com/bc41dd/original/2X/6/64c16f77b47e318a985ecb8c512edb4971fd9bd2.jpeg]\n\n\n\n\n\nimage\n[https://europe1.discourse-cdn.com/bc41dd/optimized/2X/5/5ca63a8a0e7af09bf402eeae78566c52d246ae43_2_690x447.jpeg]\nimage1260×818 110 KB\n[https://europe1.discourse-cdn.com/bc41dd/original/2X/5/5ca63a8a0e7af09bf402eeae78566c52d246ae43.jpeg]\n\n\n\n\n\nimage\n[https://europe1.discourse-cdn.com/bc41dd/optimized/2X/3/35a51acadc8e5c763e445226a4b1aa8f064a804b_2_690x447.jpeg]\nimage1260×818 129 KB\n[https://europe1.discourse-cdn.com/bc41dd/original/2X/3/35a51acadc8e5c763e445226a4b1aa8f064a804b.jpeg]\n\n\n\n\n\nimage\n[https://europe1.discourse-cdn.com/bc41dd/optimized/2X/8/826bfd8ca135e5c3dd93c49ee30e9d232b258abf_2_690x447.jpeg]\nimage1260×818 156 KB\n[https://europe1.discourse-cdn.com/bc41dd/original/2X/8/826bfd8ca135e5c3dd93c49ee30e9d232b258abf.jpeg]\n\n\n\nAttestation flow\n\n\n\nimage\n[https://europe1.discourse-cdn.com/bc41dd/optimized/2X/8/859eec235c1b80d4f2f41a9aae723dde788a3c1a_2_690x206.png]\nimage1260×377 59.7 KB\n[https://europe1.discourse-cdn.com/bc41dd/original/2X/8/859eec235c1b80d4f2f41a9aae723dde788a3c1a.png]\n\n\n\n\n\nimage\n[https://europe1.discourse-cdn.com/bc41dd/optimized/2X/d/dcc30c18998753dd70a74f9272c70c77d9fb2e59_2_690x199.png]\nimage1260×364 53.6 KB\n[https://europe1.discourse-cdn.com/bc41dd/original/2X/d/dcc30c18998753dd70a74f9272c70c77d9fb2e59.png]\n\n\n\nATTESTATION MECHANISMS\n\nWe support peer to peer message attestation with customized identity roles with\nrealtime roles validity check through EAS resolver, our design is compatible\nwith existing EAS mechanism.\n\n * Attestation Types:\n   * Message attestation with customized identity roles\n     * Badgeholders\n     * Delegates\n     * Delegators\n * Workflow:\n   * Users submit attestation through our passport-frontend or directly through\n     smart contract on Optimism at our EAS schema contract.\n   * The EAS schema contract call role resolver contract.\n   * The role resolver contract call customized role validity checker for each\n     customized role\n     * Badgeholders are identified by on-chain address registry which is also\n       viewable and challengeable by third party\n     * Delegates and Delegators are identified by OP token contract\n       [https://optimistic.etherscan.io/token/0x4200000000000000000000000000000000000042]\n       inside getVotes and delegates view functions\n   * If the resolver returns true, then emit the attestation. The transaction is\n     completed per user perspective.\n   * Curia Indexer picks all attestations for the schema up.\n   * The attestation can be viewed through our passport-frontend in both\n     attester and attested address.\n * Schema Definitions:\n   * The attester and attested are already included in EAS attestation info by\n     default so we omit this in the data part.\n   * {role: string, message: string}\n\nANONYMOUS ATTESTATION MECHANISM\n\nANONYMOUS ATTESTATION MECHANISM\n\nIn addition to normal attestation we also aim to support anonymous attestation\nin the same manner, in this case, peer to peer message attestation with\ncustomized identity roles. Anonymous in this case refers to instead of revealing\nattester we hide them instead while valid identity roles are still shown.\n\n * ZKP Overview:\n   * To achieve this, we utilize a cryptographic primitive called zero knowledge\n     proof, this allows us to hide some information while guaranteeing an\n     enforced correct statement for such information. In this case, identity\n     roles.\n * Chosen ZKP Protocols:\n   * We choose UltraPlonk (zkSNARK) to be our ZK scheme and will be implemented\n     using Noir (https://noir-lang.org/ [https://noir-lang.org/]) due to ease of\n     development, community support, and tooling.\n * Implementation Details And Workflow:\n   \n   * We came up with 2 possible variants of the anonymous attestation mechanism,\n     each having different pros and cons. In the sense of user perspective,\n     other workflows other than the ZK part would still be the same.\n   \n   * ZK Proof Generation\n     \n     * Curia Signature\n       * Identity role proof is generated by verifying Curia signature. The\n         signature and address verification is obtained off-chain from\n         passport-frontend. Address verification process is done through either\n         ECDSA signature verification (native signature), or EDDSA signature\n         verification (derived signature from registered keypair, intended for\n         AA account)\n         * User request to do anonymous attestation to target address on some\n           message\n         * User send signature verifying their ownership of address to Curia\n           through passport-frontend (signature can be ECDSA or registered\n           EDDSA)\n         * Curia gives back a signature that guarantees ownership of the address\n           with the identity role. This signature is signed on address and\n           identity role.\n         * Calculate revoker using hash of address and signature\n         * User generate ZK Proof that proof that\n           * User know a valid Curia signature that sign on the specific address\n           * Signature signed by that specific address on\n             “CURIA_ANONYMOUS_ATTESTATION_V1” message is valid\n           * Attestation message is attached in public input\n           * Random nonce is attached in public input\n           * Revoker hash (hash of revoker) is correctly calculated and is\n             attached in public input\n       * Pros:\n         * Support real time role update\n         * Infinite identity group (We can support arbitrary identity groups ex.\n           Top 10 Delegate, etc.)\n         * Very fast and not heavy computation dependent.\n         * Curia also has zero knowledge to link which attestation has been done\n           if the requested signature pool is large enough.\n       * Cons\n         * Rely on Curia infrastructure.\n         * Building blocks are not designed to be composable.\n     * Semaphore Group\n       * Identity role proof is generated by verifying Semaphore group’s merkle\n         tree inclusion of the address and the address ownership verification\n         similar to Curia Signature method (ECDSA and EDDSA). The Semaphore\n         group of each identity role is updated on-chain by Curia every 2-months\n         interval (corresponding to Passport’s season).\n         * User request to do anonymous attestation to target address on some\n           message\n         * User fetch all semaphore merkle tree leafs\n         * User generates a signature verifying their ownership of the account.\n         * Calculate revoker using hash of address and signature\n         * User generate ZK Proof that proof that\n           * User knows the merkle path from their address leaf to the root.\n           * Signature signed by that specific address on\n             “CURIA_ANONYMOUS_ATTESTATION_V1” message is valid\n           * Attestation message is attached in public input\n           * Random nonce is attached in public input\n           * Revoker hash (hash of revoker) is correctly calculated and is\n             attached in public input\n       * Pros:\n         * Very decentralized.\n         * Proof and attestation transactions can be generated without\n           interacting with Curia.\n         * All addresses in each group are verifiable.\n       * Cons:\n         * Computationally and communicationally expensive.\n         * Not real-time at all.\n         * Group membership update is very costly due to the large membership\n           size nature.\n   \n   * Then the proof is submitted to the relayer which the relayer then will call\n     the “Curia Anonymous Attestation” contract. This contract will then verify\n     the zk proof and call attestation function at EAS on behalf of the user.\n   \n   * Result of attestation would be “Curia Anonymous Attestation” contract\n     attest to target address.\n   \n   * Anonymous attestation can be revoked by calling “Curia Anonymous\n     Attestation” contract and providing uid of the attestation and preimage of\n     “Revoker hash” submitted in the attestation. If the contract can correctly\n     verify Revoker hash preimage, then the contract will call revoke at EAS on\n     behalf of the user.\n\n9. SMART ACCOUNT WALLET:\n\nThe smart account wallet serves as a comprehensive digital repository, designed\nto securely store and manage each participant’s on-chain identity passport along\nwith their related attestations, providing an accessible record of their\ngovernance roles, contributions, and achievements within the Optimism\ncollective.\n\n * Smart Account Wallet Overview:\n   * A smart contract wallet is a type of Ethereum account that is managed by a\n     smart contract instead of an externally owned account (EOA) private key.\n     They can have benefits like multi-signature capability, and can be\n     customized to serve more specific use cases.\n * Chosen Smart Account Wallet\n   * We chose Safe (CORE) to be our base implementation for our smart wallet\n     account. Safe (CORE) is modular, battle-tested, and has been used by many\n     projects. It also has great tooling and community support. We explored the\n     Account Abstraction approach, but we think it may not be needed for the\n     first version.\n * Implementation Details And Workflow:\n   * Users create OP Passport from OP Passport frontend.\n   * System will create new smart account, add user address to signer and\n     register this smart account address to the system\n   * System will create attestation and badge to this smart account address (and\n     additional fields like ens, user EOA address for reference.)",
  "views": 500,
  "like_count": 12,
  "word_count": 3030,
  "answer": [
    {
      "content": "It’s great to see op passport products!\nHi,@v3naru_Curia [/u/v3naru_curia], we are also working on an EAS based project,\nFairsharing!\n\nfairsharing.xyz [https://fairsharing.xyz/]\n\n\nFAIRSHARING | DECENTRALIZING COLLABORATION [https://fairsharing.xyz/]\n\nFairSharing empowers web3 contributors to record onchain, gain community\nattestations, claim token rewards, and experience fair allocation based on\ncontributions.\n\n\n\n\nFairsharing is a protocol for recording contributions on a chain to help record\nthem more fairly, and is currently being used by over 30 organisations. We’ve\nrecently been thinking about the next steps for the product, which also includes\na lot of EAS modifications, and we’d love to talk to you about it. my telegram\n@marcuszheng",
      "created_at": "2024-06-19T05:32:27.726Z",
      "trust_level": 2,
      "username": "Marcus01",
      "admin": false,
      "moderator": false,
      "staff": false,
      "like_count": 2
    },
    {
      "content": "You’re doing a great job @v3naru_Curia [/u/v3naru_curia] and team!\n\nI just have some questions that would be good to resolve and I would appreciate\nyour comments.\n\n 1. It is not very clear to me the main focus of the solution or the problem it\n    would be solving, is it focused on building a reputation of delegates based\n    on comments/feedback from voters? Or is it a way for voters to provide us\n    with feedback on the proposals according to the voting period so that we can\n    analyze and vote considering their feedback and building a reputation with\n    the more people get involved in this process?.\n\n 2. The other thing is, and following to @AnthiasLabs [/u/anthiaslabs] question,\n    what would be the ways to attract more users to the platform? It is clear to\n    me that there will be rewards for delegates, but for voters will they be\n    given some incentive or is it the passport that will count too?.\n\n 3. The Stamp Metrics are badges that are earned when you have more\n    endorsements?, or under which parameters?, How it’s the dynamic to win it?.\n    It is not very clear to me.\n\n 4. It is quite clear to me about Zero Knowledge, I worked on a solution with\n    that and it is a good strategy to maintain people’s anonymity. But what\n    happens if some anonymous person writes unkind words to delegates? It would\n    be good to have guidelines for conduct and respect.\n\n 5. The attestations would be generated every time a voter generates an\n    endorsement, and/or a revoke, a good use would also be to generate it as a\n    stamp credential. (but first I would have to understand the dynamics of\n    stamps metrics.:sweat_smile:\n    [https://emoji.discourse-cdn.com/twitter/sweat_smile.png?v=12])\n\nI greatly appreciate your feedback and congratulations on this project!\n\nLiliop.eth",
      "created_at": "2024-06-08T08:28:38.604Z",
      "trust_level": 3,
      "username": "Liliop.eth",
      "admin": false,
      "moderator": false,
      "staff": false,
      "like_count": 1
    },
    {
      "content": "Thanks for your answer!!\nIf you want to invite user testing, I’m happy to help. :smiling_face:\n[https://emoji.discourse-cdn.com/twitter/smiling_face.png?v=12]",
      "created_at": "2024-06-12T14:12:25.475Z",
      "trust_level": 3,
      "username": "Liliop.eth",
      "admin": false,
      "moderator": false,
      "staff": false,
      "like_count": 1
    },
    {
      "content": "Thanks for sharing this @v3naru_Curia [/u/v3naru_curia] ! Assuming this was\ndiscussed more in the original Mission Request, but can you share a bit more\nabout how this differentiates from the function served by this page on your\nguys’ current dashboard: Delegate | Optimism Governance Dashboard by curiaLab.\n[https://optimism.curiahub.xyz/delegate]? After reviewing the designs, it\nappears the primary new feature is the ability to endorse a delegate; are we\ncorrect in that understanding? Additionally, if that is the case, how are you\nthinking about the flow/incentive to attract community members to endorse other\nmembers? Purely good will, or is there something else?\n\nThanks again for your guys’ great work. Looking forward to hearing more here.",
      "created_at": "2024-06-07T13:38:10.413Z",
      "trust_level": 2,
      "username": "AnthiasLabs",
      "admin": false,
      "moderator": false,
      "staff": false,
      "like_count": 1
    },
    {
      "content": "Thank you, @AnthiasLabs [/u/anthiaslabs] and @Liliop.eth [/u/liliop.eth], for\nyour thoughtful questions and support! We appreciate your engagement and are\nhappy to provide more details on the OP Passport project.\n\n\n[https://dub1.discourse-cdn.com/bc41dd/user_avatar/gov.optimism.io/anthiaslabs/48/10199_2.png]\nAnthiasLabs:\n\n> can you share a bit more about how this differentiates from the function\n> served by this page on your guys’ current dashboard\n\nThe OP Passport project is a separate initiative that utilizes the data\ninfrastructure built for the Optimism Governance Dashboard. The primary new\nfeatures include:\n\n 1. Endorsement Mechanism: Beyond endorsing a delegate, OP Passport integrates\n    Zero-Knowledge Proof (ZKP) technology for privacy-preserving on-chain\n    attestations, offering a more secure and private way to endorse and verify\n    roles and contributions without compromising anonymity.\n 2. Digital Identity Passports: This feature allows users to manage their\n    on-chain identity, which includes tracking governance participation and\n    achievements through digital passports.\n 3. Badge Issuance and Management: Users can earn badges based on predefined\n    criteria, which are then securely managed through smart contracts.\n\n\n[https://dub1.discourse-cdn.com/bc41dd/user_avatar/gov.optimism.io/liliop.eth/48/8850_2.png]\nLiliop.eth:\n\n> It is not very clear to me the main focus of the solution or the problem it\n> would be solving, is it focused on building a reputation of delegates based on\n> comments/feedback from voters?\n\n 1. Reputation Building: The OP Passport project primarily focuses on building\n    and maintaining the reputation of delegates through on-chain endorsements\n    and attestations. Endorsements provide immediate social validation, while\n    badges offer a long-term record of achievements and contributions that can\n    support additional use cases, such as gated-attestation. This system\n    encourages governance participation, transparency, and accountability.\n\n 2. Building a Distributed Trust Network and Identity: It allows governance\n    participants to validate and attest to the contributions of other\n    participants. This mechanism is crucial for building an on-chain identity\n    and a network of trust in the OP Collective and Web3 in general. By\n    providing a verifiable record of each participant’s contributions and\n    endorsements, it helps establish a more robust reputation system where users\n    can trust the credentials and achievements attested on-chain by a network of\n    other users. This, in turn, encourages more meaningful and trustworthy\n    interactions within the community, reinforcing the integrity and\n    effectiveness of the governance process.\n\n 3. Privacy-Preserving Governance: The privacy aspect of the OP Passport project\n    is specifically focused on anonymous attestations, ensuring that users can\n    provide on-chain attestations without revealing their identity while still\n    maintaining the integrity and validity of the endorsement/attestation.\n\nIncentives and User Attraction:\n\n\n[https://dub1.discourse-cdn.com/bc41dd/user_avatar/gov.optimism.io/anthiaslabs/48/10199_2.png]\nAnthiasLabs:\n\n> how are you thinking about the flow/incentive to attract community members to\n> endorse other members? Purely good will, or is there something else?\n\n * Incentives for Participation:\n   \n   * Achievements for governance participants: Participants can earn badges and\n     build their reputation through active governance participation, including\n     endorsements and contributions to governance processes.\n   * Gamification Elements: Introducing gamified elements such as levels and\n     achievements to encourage active participation and endorsements.\n   * Community Recognition and Other Rewards: We are exploring additional\n     incentives to increase recognition within the community. Please share any\n     ideas you might have on this.\n\n\n[https://dub1.discourse-cdn.com/bc41dd/user_avatar/gov.optimism.io/liliop.eth/48/8850_2.png]\nLiliop.eth:\n\n> The Stamp Metrics are badges that are earned when you have more endorsements?,\n> or under which parameters?, How it’s the dynamic to win it?. It is not very\n> clear to me.\n\nBadge Parameters:\n\n * Badge As Achievement: Badges are earned based on a variety of parameters,\n   including but not limited to voting participation, delegations, endorsements,\n   and other seasonal contributions. For example:\n   \n   * Voting Participation: Frequency and consistency of participation in votes.\n   * Endorsements: Number of endorsements received and given.\n   * Voting Power: Number of voting power received via delegation\n\nWe will release more details on the badge criteria soon.\n\nThank you once again for your feedback and support. We are committed to building\nrobust and providing effective governance tools with the OP Passport project and\nlook forward to further discussions and improvements based on your insights!\n\nFeel free to ask if you need further clarifications or have additional\nsuggestions!",
      "created_at": "2024-06-11T21:41:02.856Z",
      "trust_level": 2,
      "username": "v3naru_Curia",
      "admin": false,
      "moderator": false,
      "staff": false,
      "like_count": 1
    }
  ],
  "created_at": "2024-06-07T09:23:44.628Z"
}